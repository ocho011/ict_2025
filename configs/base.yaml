# =============================================================
# ICT 2025 Trading System Configuration
# =============================================================
# All trading-related settings in a single YAML file.
# API keys are managed separately via api_keys.ini or environment variables.

# Binance API Endpoints Configuration
# Allows customization for proxies, custom endpoints, or Binance endpoint changes
binance:
  # REST API Base URLs
  rest_testnet_url: "https://testnet.binancefuture.com"
  rest_mainnet_url: "https://fapi.binance.com"
  # Market Data WebSocket URLs (public kline/ticker streams)
  ws_testnet_url: "wss://stream.binancefuture.com"
  ws_mainnet_url: "wss://fstream.binance.com"
  # User Data WebSocket URLs (private order/account streams)
  user_ws_testnet_url: "wss://stream.binancefuture.com/ws"
  user_ws_mainnet_url: "wss://fstream.binance.com/ws"

# Logging Configuration
logging:
  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  log_level: "INFO"
  # Directory for log files (relative to project root)
  log_dir: "logs"
  # Live data logging (set to false for long-term analysis to reduce log volume ~70%)
  log_live_data: false

# Emergency Liquidation Configuration
# SECURITY-FIRST DESIGN: emergency_liquidation=true by default (capital protection)
liquidation:
  emergency_liquidation: true
  close_positions: true
  cancel_orders: true
  # Maximum time allowed for liquidation operations (1.0 - 30.0 seconds)
  timeout_seconds: 5.0
  # Maximum retry attempts (0 - 10)
  max_retries: 3
  # Delay between retries, exponential backoff: delay * (2 ^ attempt)
  retry_delay_seconds: 0.5

# Trading Configuration
trading:
  defaults:
    # Strategy to use: mock_sma, always_signal, ict_strategy
    strategy: "ict_strategy"
    # Strategy assembly type: composable (modular) or monolithic (legacy, deprecated)
    strategy_type: "composable"
    # Leverage (1-125x for Binance Futures)
    leverage: 1
    # Maximum risk per trade (0.01 = 1% of account)
    max_risk_per_trade: 0.01
    # Take profit ratio relative to risk (2.0 = 2:1 reward:risk)
    take_profit_ratio: 2.0
    # Stop loss percentage (0.02 = 2%)
    stop_loss_percent: 0.02
    # Maximum symbols allowed (1-20)
    max_symbols: 10
    # Historical candles to backfill at startup (0-1000)
    backfill_limit: 200
    # Margin type: ISOLATED or CROSSED
    margin_type: "ISOLATED"
    # Timeframe intervals for ICT Multi-Timeframe analysis
    # Must match ltf/mtf/htf in strategy_params
    intervals:
      - "1m"
      - "5m"
      - "15m"

    # ICT Strategy Parameters
    # Profile options: strict (1-2 sig/wk), balanced (5-10), relaxed (15-20)
    strategy_params:
      ltf_interval: "1m"
      mtf_interval: "5m"
      htf_interval: "15m"
      active_profile: "RELAXED"
      buffer_size: 200
      rr_ratio: 2.0
      # Kill zone filter: true for production, false for testing
      use_killzones: false

    # Dynamic Exit Configuration
    exit_config:
      dynamic_exit_enabled: true
      # Options: trailing_stop, breakeven, timed, indicator_based
      exit_strategy: "trailing_stop"
      # Trailing Stop: distance (2%) and activation threshold (1%)
      trailing_distance: 0.02
      trailing_activation: 0.01
      # BreakEven: move SL to entry after profit threshold
      breakeven_enabled: true
      breakeven_offset: 0.001
      # Time-based exit (default: disabled for ICT)
      timeout_enabled: false
      timeout_minutes: 240
      # Volatility-based exit using ATR
      volatility_enabled: false
      atr_period: 14
      atr_multiplier: 2.0

  # Per-symbol configuration overrides
  # Each symbol inherits from defaults and can override any field
  symbols:
    BTCUSDT:
      leverage: 1
    ETHUSDT:
      leverage: 1
    ZECUSDT:
      leverage: 1
    XRPUSDT:
      leverage: 1
    TAOUSDT:
      leverage: 1
    DOTUSDT:
      leverage: 1
    DOGEUSDT:
      leverage: 1
