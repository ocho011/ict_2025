# Trading Strategy Configuration Example
# Copy this file to trading_config.ini and customize your strategy

[trading]
# Trading pairs (USDT-M Futures) - Issue #8
# Multi-coin support (max 10 symbols, comma-separated)
# Takes priority over 'symbol' if both are present
# TESTING: Single coin to verify WebSocket data reception (Issue #14)
symbols = BTCUSDT, ETHUSDT, ZECUSDT, XRPUSDT, TAOUSDT

# Legacy single symbol mode (deprecated)
# Use 'symbols' instead for forward compatibility
# symbol = BTCUSDT

# Timeframe intervals (comma-separated) - ICT Multi-Timeframe (Issue #7)
# Supported: 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d, 3d, 1w
#
# ‚ö†Ô∏è IMPORTANT: Must match ltf_interval, mtf_interval, htf_interval in [ict_strategy]
# DataCollector will stream ALL intervals listed here
# ICTStrategy will use only ltf/mtf/htf configured in [ict_strategy]
#
# üìä CURRENT: SCALPING SETUP (TESTING)
# HTF (15m) for trend, MTF (5m) for structure, LTF (1m) for entry
intervals = 1m, 5m, 15m
#
# üìä ALTERNATIVE SETUPS:
# intervals = 5m, 1h, 4h    # Standard ICT setup
# intervals = 15m, 4h, 1d   # Swing trading setup

# Strategy to use (must match a strategy class name)
# Options: mock_sma, always_signal, ict_strategy
# ict_strategy: Inner Circle Trader methodology with Smart Money Concepts
strategy = ict_strategy

# Leverage (1-125x for Binance Futures)
# WARNING: Higher leverage = higher risk
leverage = 1

# Maximum risk per trade (as decimal, e.g., 0.01 = 1%)
# Recommended: 0.01-0.02 (1-2% of account)
max_risk_per_trade = 0.01

# Take profit ratio relative to risk
# Example: 2.0 means 2:1 reward:risk ratio
take_profit_ratio = 2.0

# Stop loss percentage (as decimal, e.g., 0.02 = 2%)
stop_loss_percent = 0.02

# Historical candles to backfill at startup (0-1000)
# ICT strategy requires 200+ candles for proper market structure analysis
# Recommended: 200-500 for ICT strategy
backfill_limit = 200

[logging]
# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# DEBUG: Detailed information for diagnosing problems
# INFO: General informational messages (recommended for production)
# WARNING: Warning messages for potentially harmful situations
# ERROR: Error messages for serious problems
log_level = INFO

# Directory for log files (relative to project root)
log_dir = logs

# Live data logging (üîÑ Live data: SYMBOL INTERVAL @ PRICE)
# Set to false for long-term analysis to reduce log volume by ~70%
# Live data is already captured in candle buffers, so this log is optional
log_live_data = false

[ict_strategy]
# ICT Strategy Configuration
# Inner Circle Trader methodology using Smart Money Concepts

# =============================================================================
# Multi-Timeframe Configuration (Issue #7)
# =============================================================================
# ICT methodology uses three timeframes for analysis:
#   - HTF (High Timeframe): Trend direction and market bias
#   - MTF (Medium Timeframe): Structure detection (FVG, OB, liquidity)
#   - LTF (Low Timeframe): Entry timing and displacement confirmation
#
# STANDARD SETUP (RECOMMENDED):
#   ltf_interval = 5m    # Entry timing
#   mtf_interval = 1h    # Structure detection
#   htf_interval = 4h    # Trend direction
#
# SWING TRADING SETUP:
#   ltf_interval = 15m   # Entry timing
#   mtf_interval = 4h    # Structure detection
#   htf_interval = 1d    # Trend direction
#
# SCALPING SETUP (TESTING ONLY):
#   ltf_interval = 1m    # Entry timing
#   mtf_interval = 5m    # Structure detection
#   htf_interval = 15m   # Trend direction

ltf_interval = 1m
mtf_interval = 5m
htf_interval = 15m

# =============================================================================
# Parameter Profile Selection (TUNING SYSTEM)
# =============================================================================
# Active parameter profile for signal frequency tuning
# Options: strict, balanced, relaxed
#
# STRICT (1-2 signals/week):
#   - High-quality signals, minimal false positives
#   - Current baseline configuration
#   - Best for: Conservative trading, high win rate priority
#
# BALANCED (5-10 signals/week) - RECOMMENDED:
#   - Good signal-to-noise ratio
#   - 2-3x more signals than strict
#   - Best for: Active trading, balanced approach
#
# RELAXED (15-20 signals/week) - TESTING ONLY:
#   - Maximum signal frequency
#   - Higher false positive risk
#   - Best for: Testing, strategy development, paper trading
#
# Current Setting: BALANCED (recommended for production)
# Changed from RELAXED to BALANCED for better signal quality
active_profile = BALANCED

# =============================================================================
# Individual Parameters (Auto-loaded from active_profile)
# =============================================================================
# NOTE: Parameters below are overridden by active_profile selection
# To use custom parameters, set active_profile to your base profile, then
# manually override specific parameters below
#
# Profile parameter values:
# - strict:   swing=5,  disp=1.5, fvg=0.001, ob=1.5, liq=0.001
# - balanced: swing=7,  disp=1.3, fvg=0.002, ob=1.3, liq=0.002
# - relaxed:  swing=10, disp=1.2, fvg=0.005, ob=1.2, liq=0.005

# Buffer size for historical candles
# Recommended: 200+ for ICT analysis (market structure, FVG, OB detection)
buffer_size = 200

# Swing detection lookback period
# Number of candles to look back for swing highs/lows
# Profile defaults: strict=5, balanced=7, relaxed=10
# swing_lookback = 5

# Displacement ratio threshold
# Minimum ratio vs average range for displacement detection
# 1.5 = displacement must be 1.5x larger than average candle range
# Profile defaults: strict=1.5, balanced=1.3, relaxed=1.2
# displacement_ratio = 1.5

# Fair Value Gap minimum gap size
# Minimum gap size as percentage of price (0.001 = 0.1%)
# Smaller values detect more FVGs, larger values only significant gaps
# Profile defaults: strict=0.001, balanced=0.002, relaxed=0.005
# fvg_min_gap_percent = 0.001

# Order Block minimum strength
# Minimum displacement ratio for valid order blocks
# Profile defaults: strict=1.5, balanced=1.3, relaxed=1.2
# ob_min_strength = 1.5

# Liquidity level tolerance
# Price tolerance for equal highs/lows (0.001 = 0.1%)
# Profile defaults: strict=0.001, balanced=0.002, relaxed=0.005
# liquidity_tolerance = 0.001

# Risk-reward ratio
# Target profit relative to risk (2.0 = 2:1 reward:risk)
# Recommended: 2.0-3.0 for ICT setups
# All profiles use: 2.0
rr_ratio = 2.0

# Kill zone filter (ICT Time-Based Trading Windows)
# Controls whether to filter trades by ICT kill zone times
#
# Kill Zone Times (UTC):
#   - London Kill Zone: 08:00-09:00 UTC (03:00-04:00 AM EST)
#   - NY AM Kill Zone: 15:00-16:00 UTC (10:00-11:00 AM EST)
#   - NY PM Kill Zone: 19:00-20:00 UTC (02:00-03:00 PM EST)
#
# TRUE (RECOMMENDED FOR PRODUCTION):
#   Only trade during ICT kill zones for optimal liquidity and price action
#
# FALSE (TESTING/DEVELOPMENT ONLY):
#   Trade at any time regardless of kill zone
#   ‚ö†Ô∏è  WARNING: Disabling kill zones removes a critical ICT filter
#   ‚ö†Ô∏è  Use FALSE only for:
#       - Development and testing purposes
#       - Generating frequent signals during non-kill zone hours
#       - Backtesting outside standard market hours
#   ‚ö†Ô∏è  NEVER use FALSE in production trading with real funds
#
# Current Setting: FALSE (for testing/development - signals will occur at any time)
# TODO: Change back to TRUE before production deployment
use_killzones = false

# =============================================================================
# Emergency Liquidation Configuration
# =============================================================================
# Controls position and order handling during system shutdown
#
# SECURITY-FIRST DESIGN (Business Panel Recommendation):
# - DEFAULT: emergency_liquidation=true (capital protection)
# - Taleb's Paranoia: Assume failures, protect capital by default
# - Meadows' Systems Thinking: Fail-safe shutdown design
# - Collins' Disciplined Execution: Systematic, auditable liquidation
#
# MODES:
#
# TRUE (CAPITAL PROTECTION - RECOMMENDED):
#   ‚úÖ Cancels all pending orders (TP, SL, limit orders)
#   ‚úÖ Closes ALL positions using market orders (reduceOnly=True)
#   ‚úÖ Comprehensive audit logging with correlation IDs
#   ‚ö†Ô∏è  May result in unfavorable exit prices (market order slippage)
#   üìù Use when: Production shutdown, emergency scenarios, extended downtime
#
# FALSE (MANUAL MANAGEMENT - RISKY):
#   ‚ùå Positions remain OPEN after shutdown (exposed to market volatility)
#   ‚ùå Pending orders remain ACTIVE (may fill unexpectedly)
#   ‚ö†Ô∏è  Capital at risk from overnight/weekend exposure
#   ‚ö†Ô∏è  Manual intervention required for position cleanup
#   üìù Use when: Development/testing, manual position management, frequent restarts
#
# =============================================================================

[liquidation]
# Enable emergency liquidation on shutdown (DEFAULT: true for capital protection)
# Set to false ONLY if you accept the risk of open positions after shutdown
emergency_liquidation = true

# Close all open positions during liquidation (DEFAULT: true)
# If false, only orders are cancelled, positions remain exposed
close_positions = true

# Cancel all pending orders during liquidation (DEFAULT: true)
# If false, orders may fill unexpectedly when bot is offline
cancel_orders = true

# Maximum time allowed for liquidation operations in seconds (DEFAULT: 5.0)
# Range: 1.0 - 30.0 seconds
# Balance: Speed vs reliability (5 seconds recommended)
timeout_seconds = 5.0

# Maximum retry attempts for failed operations (DEFAULT: 3)
# Range: 0 - 10 retries
# 0 = no retries (fast but risky), 3 = balanced, 10 = maximum reliability
max_retries = 3

# Delay between retry attempts in seconds (DEFAULT: 0.5)
# Range: 0.1 - 5.0 seconds
# Exponential backoff: delay * (2 ^ attempt)
retry_delay_seconds = 0.5

# =============================================================================
# Dynamic Exit Configuration (Issue #43)
# =============================================================================
# Advanced exit strategies beyond basic TP/SL for improved risk management
# and profit protection in ICT trading strategies.
#
# Available exit_strategy options:
#   - trailing_stop: Move stop loss as price moves in your favor
#   - breakeven: Move stop to entry price after profit threshold
#   - timed: Exit after specified time period
#   - indicator_based: Use ATR for volatility-based exits
#
# RECOMMENDED SETUP (OPTION 1):
#   - Primary strategy: trailing_stop (2% distance, 1% activation)
#   - BreakEven protection: enabled (0.1% offset)
#   - Time-based exit: disabled (ICT focuses on price action)
#   - Volatility-based: disabled (can enable for advanced users)
#
# PARAMETER RANGES:
#   - trailing_distance: 0.001-0.1 (0.1%-10%)
#   - trailing_activation: 0.001-0.05 (0.1%-5%)
#   - breakeven_offset: 0.0001-0.01 (0.01%-1%)
#   - timeout_minutes: 1-1440 (1 minute - 24 hours)
#   - atr_period: 5-100 (ATR calculation period)
#   - atr_multiplier: 0.5-5.0 (ATR multiplier for stops)

[exit_config]
# Enable dynamic exit system (DEFAULT: true)
# Set to false to use only basic TP/SL from strategy
dynamic_exit_enabled = true

# Primary exit strategy (DEFAULT: trailing_stop)
# Options: trailing_stop, breakeven, timed, indicator_based
exit_strategy = trailing_stop

# Trailing Stop Parameters
# trailing_distance: Distance to trail behind current price (2% = 0.02)
# trailing_activation: Profit threshold to activate trailing (1% = 0.01)
trailing_distance = 0.02
trailing_activation = 0.01

# BreakEven Protection (RECOMMENDED: true)
# Automatically move stop loss to entry price after reaching profit threshold
# breakeven_offset: Small offset above entry to cover fees (0.1% = 0.001)
breakeven_enabled = true
breakeven_offset = 0.001

# Time-based Exit (DEFAULT: false for ICT strategy)
# Exit position after specified time regardless of profit/loss
# Useful for preventing overnight exposure or stale positions
timeout_enabled = false
timeout_minutes = 240

# Volatility-based Exit (DEFAULT: false)
# Use ATR (Average True Range) to adjust stop distances dynamically
# Higher volatility = wider stops, lower volatility = tighter stops
volatility_enabled = false
atr_period = 14
atr_multiplier = 2.0
