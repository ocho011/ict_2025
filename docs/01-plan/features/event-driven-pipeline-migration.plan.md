# Feature Plan: Event-Driven Pipeline Migration

## 1. 개요 (Overview)
기존 모노리식 전략을 컴포넌트 조립형, 이벤트 드리븐 파이프라인으로 마이그레이션합니다. 시그널 생성, 주문 생성/전송, 포지션 라이프사이클 관리를 이벤트 드리븐 방식으로 구현하여 기존 매매 플로우를 완전히 대체하고, 마이그레이션 완료 후 불필요한 코드 및 파일을 정리합니다.

## 2. 목표 (Goals)
*   **컴포넌트화 및 모듈화:** 시그널 생성, 주문 처리, 포지션 관리 기능을 독립적인 컴포넌트로 분리하고 모듈화합니다.
*   **이벤트 드리븐 아키텍처:** 각 컴포넌트 간의 통신을 이벤트 기반으로 전환하여 유연성과 확장성을 확보합니다.
*   **기존 플로우 완전 대체:** 새로운 이벤트 드리븐 파이프라인으로 기존 모노리식 매매 플로우를 완전히 대체합니다.
*   **성능 및 안정성 향상:** 변경된 아키텍처를 통해 시스템의 성능과 안정성을 개선합니다.
*   **코드 베이스 정리:** 마이그레이션 완료 후 불필요한 파일, 클래스, 메서드를 제거하여 코드 베이스를 간소화합니다.

## 3. 범위 (Scope)
### 포함 (In-Scope)
*   시그널 생성 컴포넌트 개발 및 통합
*   주문 생성 및 전송 컴포넌트 개발 및 통합
*   포지션 라이프사이클 관리 컴포넌트 개발 및 통합
*   이벤트 버스(Event Bus) 또는 메시지 브로커(Message Broker) 설계 및 구현/통합
*   각 컴포넌트 간 이벤트 발행/구독 모델 구현
*   통합 테스트 및 성능 테스트 (기존 기능의 완전 대체 확인)

### 제외 (Out-of-Scope)
*   새로운 전략 로직 개발 (기존 전략 로직을 컴포넌트화하는 것에 집중)
*   프론트엔드 또는 UI 변경 (백엔드 로직 마이그레이션에 집중)
*   데이터베이스 스키마 변경 (현재는 기존 데이터 모델 유지)

<h2> 4. 접근 방식 (Approach)</h2>
<ol>
<li>
<strong>현행 시스템 분석:</strong> 기존 모노리식 전략의 매매 플로우를 상세히 분석하여 컴포넌트 분리 지점을 식별합니다.
</li>
<li>
<strong>이벤트 정의:</strong> 각 컴포넌트 간에 주고받을 이벤트들을 정의합니다 (예: <code>SignalGeneratedEvent</code>, <code>OrderCreatedEvent</code>, <code>PositionOpenedEvent</code>).
</li>
<li>
<strong>컴포넌트 설계:</strong> 정의된 이벤트를 기반으로 각 컴포넌트의 책임과 인터페이스를 설계합니다.
</li>
<li>
<strong>점진적 마이그레이션:</strong> 기존 시스템을 한 번에 전환하기보다는, 핵심 기능부터 점진적으로 마이그레이션하고 테스트합니다. (예: 시그널 생성 -> 주문 전송 -> 포지션 관리 순)
</li>
<li>
<strong>테스트 주도 개발 (TDD):</strong> 각 컴포넌트 및 통합 지점에 대한 단위 테스트와 통합 테스트를 작성하여 안정성을 확보합니다.
</li>
<li>
<strong>성능 벤치마킹:</strong> 마이그레이션 전후의 성능 지표를 비교하여 성능 저하가 없는지 확인합니다.
</li>
</ol>
<h2> 5. 예상 결과물 (Deliverables)</h2>
<ul>
<li>
<code>docs/01-plan/features/event-driven-pipeline-migration.plan.md</code> (본 문서)
</li>
<li>
<code>docs/02-design/features/event-driven-pipeline-migration.design.md</code> (설계 문서)
</li>
<li>새로운 이벤트 드리븐 컴포넌트 코드</li>
<li>이벤트 버스/메시지 브로커 구현 또는 통합 코드</li>
<li>각 컴포넌트 및 통합 테스트 코드</li>
<li>마이그레이션 후 불필요 코드 제거 완료</li>
</ul>
<h2> 6. 성공 기준 (Success Criteria)</h2>
<ul>
<li>기존 모노리식 전략의 모든 매매 플로우가 새로운 이벤트 드리븐 파이프라인으로 <strong>완전히 대체</strong>되고 정상 작동합니다.</li>
<li>이벤트 드리븐 아키텍처의 <strong>유연성 및 확장성</strong>이 확보됩니다.</li>
<li>마이그레이션 후 <strong>성능 저하 없이</strong> 안정적으로 운영됩니다.</li>
<li>불필요한 기존 코드가 <strong>성공적으로 정리</strong>됩니다.</li>
<li>모든 테스트 케이스를 통과합니다.</li>
</ul>
<h2> 7. 타임라인 (Timeline)</h2>
<ul>
<li>
<strong>1주차:</strong> 현행 시스템 분석 및 이벤트 정의, 컴포넌트 인터페이스 초안 설계
</li>
<li>
<strong>2-3주차:</strong> 이벤트 버스/메시지 브로커 구현 및 시그널 생성 컴포넌트 마이그레이션
</li>
<li>
<strong>4-5주차:</strong> 주문 생성/전송 컴포넌트 마이그레이션 및 통합
</li>
<li>
<strong>6-7주차:</strong> 포지션 라이프사이클 관리 컴포넌트 마이그레이션 및 통합
</li>
<li>
<strong>8주차:</strong> 통합 테스트, 성능 벤치마킹, 코드 정리 및 최종 검토
</li>
</ul>
