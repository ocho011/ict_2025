제품 요구사항 정의서 (PRD): 바이낸스 USDT 무기한 선물 자동매매 시스템

1. Overview (개요)

이 문서는 바이낸스 USDT 무기한 선물 시장을 위한 자동매매 시스템의 제품 요구사항을 정의합니다. 본 시스템은 사용자가 직접 정의한 매매 전략을 기반으로 24시간 자동으로 거래를 실행하여, 감정적 개입으로 인한 비합리적인 판단과 손실을 최소화하는 것을 목표로 합니다.

주요 대상 사용자는 파이썬 코드와 객체 지향 개념에 대한 이해가 있고 거래소 API 연동 경험은 있으나, 직접 전체 매매 스cript를 처음부터 작성해 본 경험은 적은 '비전문 개발자'입니다.

본 시스템의 핵심 가치는 ICT(Inner Circle Trader) 이론에 기반한 다양한 기술적 지표들을 조합하여 사용자 맞춤형 전략을 손쉽게 생성하고 자동화할 수 있도록 지원하는 것입니다. 이를 통해 사용자는 복잡한 시장 분석과 반복적인 주문 실행 과정에서 벗어나, 자신의 아이디어를 체계적으로 검증하고 안정적인 자동매매 환경을 구축할 수 있습니다.

2. Core Features (핵심 기능)
2.1 ICT 전략 엔진 (ICT Strategy Engine)

What it does (무엇을 하는가): 실시간 캔들 데이터(웹소켓)를 기반으로 FVG, Order Block, Breaker Block, Liquidity Pool, Market Structure 등 주요 ICT 지표 값을 '정확하고 신뢰성 있게' 계산합니다. 이 단위 지표들을 사전에 정의된 로직에 따라 조합하여 구체적인 매매 신호(진입, 익절, 손절)를 생성합니다.

Why it's important (왜 중요한가): 시스템의 두뇌 역할을 하는 핵심 기능입니다. 감정이나 주관이 배제된, 100% ICT 이론에 입각한 체계적인 매매 판단을 내리는 근거를 제공합니다. 또한, 향후 다양한 전략을 추가할 수 있는 확장성의 기반이 됩니다.

How it works (어떻게 동작하는가):

바이낸스 웹소켓으로부터 실시간 캔들 데이터를 수신합니다.

수신된 데이터를 바탕으로 각 ICT 단위 지표(FVG, OB 등)를 계산하고 업데이트합니다.

사용자가 선택한 특정 전략 로직에 따라 단위 지표들의 조건을 확인합니다.

조건이 충족되면, 진입 가격, 포지션 방향(롱/숏), 그리고 지표 기반의 목표 익절가(TP)와 손절가(SL)를 포함한 매매 신호를 생성하여 '자동매매 실행 모듈'에 전달합니다.

초기 단계에서는 티커와 포지션(롱/숏) 단위로 하나의 전략만 적용하여 운영 복잡성을 최소화합니다.

2.2 실거래 및 시뮬레이션 실행 모듈 (Live Trading & Simulation Module)

What it does (무엇을 하는가): 'ICT 전략 엔진'으로부터 받은 매매 신호를 바탕으로 실제 바이낸스 계좌에 주문을 실행합니다. 사용자의 선택에 따라 메인넷(실거래) 또는 테스트넷(모의거래) 환경에서 동작할 수 있습니다.

Why it's important (왜 중요한가): 별도의 백테스팅 기능 대신 테스트넷 연동을 통해, 실제 시장 환경과 거의 동일한 조건에서 전략의 실효성을 검증하는 현실적인 시뮬레이션 환경을 제공합니다.

How it works (어떻게 동작하는가):

사용자의 API 키를 안전하게 저장하고 바이낸스 거래소 서버와 연결합니다.

설정 파일을 통해 메인넷/테스트넷 환경을 선택할 수 있는 옵션을 제공합니다.

매매 신호를 수신하면, 사전에 정의된 '리스크 관리' 설정에 따라 주문 수량, 레버리지 등을 계산하여 API를 통해 주문(진입, TP, SL)을 전송합니다.

2.3 지능형 리스크 관리 모듈 (Intelligent Risk Management Module)

What it does (무엇을 하는가): 사용자의 자본을 보호하기 위한 자동화된 리스크 관리 규칙을 적용합니다.

Why it's important (왜 중요한가): 수익 창출만큼이나 중요한 자본 보호를 자동화하여 감정적 대응을 원천적으로 차단하고 안정적인 시스템 운영을 가능하게 합니다.

How it works (어떻게 동작하는가):

포지션 규모 설정: 사용자는 전체 시드의 특정 비율(예: 1회 거래 시 1% 손실 제한)을 기준으로 진입 규모를 설정할 수 있으며, 시스템은 이 설정과 손절가(SL)를 바탕으로 계약 수량을 자동으로 계산합니다.

지표 기반 SL/TP: 매매 신호 생성 시 ICT 지표에 따라 결정된 명확한 손절가와 목표 익절가로 주문이 자동 설정됩니다.

2.4 모니터링 및 제어 인터페이스 (Monitoring & Control Interface)

What it does (무엇을 하는가): 자동매매 시스템의 현재 상태, 거래 내역, 손익 현황 등을 사용자에게 보여주고, 일부 설정을 변경할 수 있는 인터페이스를 제공합니다.

Why it's important (왜 중요한가): 사용자가 시스템의 작동 현황을 명확히 파악하고 신뢰할 수 있게 해줍니다.

How it works (어떻게 동작하는가):

초기 개발 단계 (MVP): 터미널(콘솔)에 실시간 로그를 출력하고, 모든 상세 내역은 로그 파일로 기록합니다.

추후 고도화 단계: 웹 기반 대시보드를 통해 모든 정보를 시각적으로 제공하고, UI 상에서 직접 설정을 변경하는 기능을 추가합니다.

3. User Experience (사용자 경험)
3.1 User Personas (사용자 페르소나)

역할: 비전문 개발자 (Hobbyist Developer)

기술 수준: 파이썬 기본 문법과 객체지향 개념 이해, 거래소 API 연동 경험 보유, Pycharm과 같은 IDE 환경에 익숙.

목표: 자신의 ICT 매매 아이디어를 시스템으로 구현하고, 감정적인 매매에서 벗어나 24시간 원칙적인 거래를 수행하고자 함.

3.2 Key User Flows (주요 사용자 흐름)

초기 환경 설정: Git에서 프로젝트를 복제(Clone)하고, requirements.txt로 필요한 라이브러리를 설치합니다.

계정 및 시스템 설정: configs/api_keys.ini 파일에 바이낸스 API 키를 입력하고, 테스트넷/메인넷 여부를 설정합니다.

매매 전략 및 리스크 설정: configs/trading_config.ini 파일에서 거래할 티커, 적용할 전략, 레버리지, 손실 허용률 등을 설정합니다.

시스템 실행 및 모니터링: IDE 또는 터미널에서 python main.py를 실행하고, 콘솔에 출력되는 실시간 로그를 통해 작동 상태를 확인합니다.

서버 배포: 로컬 테스트 완료 후, Vultr와 같은 클라우드 서버에 프로젝트를 배포하여 24시간 운영합니다.

3.3 UI/UX Considerations (UI/UX 고려사항)

MVP 단계: 모든 설정과 모니터링은 설정 파일(.ini) 수정과 터미널 로그를 통해 이루어집니다.

미래 단계 (Post-MVP): 추후 웹 기반 대시보드를 도입하여 시각적 모니터링 및 간편한 설정 변경을 지원합니다.

4. Technical Architecture (기술 아키텍처)
4.1 System Components (시스템 구성 요소)

Data Collector: binance-futures-connector의 웹소켓을 통해 실시간 캔들 및 사용자 데이터를 수신.

Event Handling System: asyncio와 다중 큐(데이터/신호/주문 큐)를 활용한 이벤트 기반 비동기 아키텍처를 적용하여 이벤트 재밍(jamming) 문제를 방지.

ICT Strategy Engine: pandas, numpy를 활용해 ICT 지표를 계산하고, 모듈화된 전략 클래스를 통해 매매 신호를 생성.

Order Execution Manager: binance-futures-connector의 REST API를 사용하여 주문을 전송하고 체결 상태를 관리.

Monitoring & Logging: Python의 logging 모듈을 사용하여 파일 및 콘솔에 시스템 활동을 체계적으로 기록.

4.2 Data Models (데이터 모델)

Event, Candle, Signal, Position, Order 등의 핵심 데이터 구조를 클래스로 정의하여 객체지향적으로 관리.

4.3 APIs and Integrations (API 및 통합)

Binance USDT-M Futures API (binance-futures-connector 라이브러리 사용)

4.4 Infrastructure Requirements (인프라 요구사항)

Development: Python 3.9+ on local PC (Windows/Mac/Linux) with Pycharm

Production: Linux (Ubuntu 22.04 LTS) on Cloud Server (Vultr, AWS EC2 etc.)

5. Development Roadmap (개발 로드맵)
Phase 1: Core Engine - End-to-End 최소 기능 구현 (MVP의 MVP)

목표: 데이터 수신부터 주문 실행까지 가장 단순한 형태로 전체 흐름을 완성.

스코프: API 연결 및 데이터 스트리밍, Mock 전략 기반 신호 생성, 테스트넷 기본 주문 실행.

Phase 2: ICT 지표 및 지능형 리스크 관리 도입

목표: 핵심 비즈니스 로직인 ICT 지표와 리스크 관리 기능 추가.

스코프: 핵심 ICT 단위 지표 계산기 구현, ICT 기반 시장가 전략 구현, 계약 수량 자동 계산 및 TP/SL 주문 연동.

Phase 3: 시스템 고도화 및 안정성 강화

목표: 24시간 안정적인 운영을 위한 내부 아키텍처 개선.

스코프: 이벤트 기반 비동기 아키텍처로 리팩토링, 정식 로깅 시스템 구축, 지정가 매매 전략 구현, 포지션 및 계좌 상태 관리 기능 추가.

Future Enhancements (미래 개선 사항)

웹 기반 모니터링 대시보드 UI 개발, 다양한 ICT 전략 추가, 다중 티커 동시 거래 지원.

6. Logical Dependency Chain (논리적 의존성 체인)

Foundation: 데이터 수신 기능은 모든 개발의 시작점입니다.

Core Flow: '데이터 수신 → 신호 생성 → 주문 실행'의 최소 기능 파이프라인을 최우선으로 구축합니다.

Adding Intelligence: 기본 파이프라인 위에 실제 ICT 전략과 리스크 관리 모듈을 구현합니다.

Stabilization: 핵심 기능 구현 후, 비동기 처리 및 로깅을 도입하여 시스템 안정성을 확보합니다.

Expansion: 안정적인 코어 시스템이 완성된 후, 추가 기능(지정가 전략, UI 등)을 개발하여 확장합니다.

7. Risks and Mitigations (리스크와 완화 방안)
7.1 기술적 리스크 (Technical Risks)

Risk: ICT 지표의 '완벽한' 구현에 집착하여 개발이 지연될 가능성.

Mitigation: '동작하는 지표'를 1차 목표로 설정하고, 널리 알려진 표준 정의를 기반으로 구현한 뒤 점진적으로 개선합니다.

7.2 시장 리스크 (Market Risks)

Risk: 급격한 변동성으로 인한 슬리피지(Slippage) 발생.

Mitigation: 초기 단계에서는 슬리피지 제어보다 손절매(Stop-Market) 주문이 반드시 실행되도록 구현하는 것에 집중하고, 슬리피지는 허용 가능한 리스크로 간주하여 설계 복잡도를 낮춥니다.

7.3 개발 리소스 리스크 (Development Resource Risks)

Risk: 작업의 난이도나 복잡성으로 인해 개발 기간이 지연될 가능성.

Mitigation: 본 문서의 로드맵과 의존성 체인을 철저히 따르고, 개발 착수 전 각 항목을 더 작은 실행 가능한 태스크로 세분화하여 계획적으로 진행합니다.

8. Appendix (부록)

[이 섹션에는 추후 프로젝트 진행 중 발생하는 리서치 자료, 상세 기술 명세 등을 추가할 수 있습니다.]