# Signal 데이터 모델 내 Metadata 필드 활용 가이드 (2025-12-20)

`Signal` 데이터 클래스의 `metadata` 필드는 표준화된 신호 규격을 유지하면서, 각 전략(Strategy) 고유의 부가 정보를 유연하게 전달하기 위한 키-값(Key-Value) 저장소입니다.

## 1. 주요 용도

### 1.1 전략별 기술적 지표 기록
표준 규격(`entry`, `tp`, `sl`)에 포함되지 않는 전략 특화 지표 값을 기록합니다.
- **예시**: `{"rsi_value": 78.5, "sma_diff": 12.3}`
- **목적**: 사후 분석(Post-trade analysis) 시 신호 발생 당시의 시장 상황 복기.

### 1.2 신호 생성 근거 (Reasoning)
복합 전략 또는 AI 기반 전략에서 신호가 생성된 구체적인 논리적 근거를 텍스트로 저장합니다.
- **예시**: `{"reason": "Bullish FVG filled and rejected at 0.5 level"}`
- **목적**: 로그 및 모니터링 UI에서 사용자에게 진입 이유 설명.

### 1.3 신호 신뢰도 및 가중치 세부 정보
단순 `confidence` 점수 외에, 신뢰도를 결정한 세부 요인들을 기록합니다.
- **예시**: `{"volume_confirm": true, "trend_alignment": 0.8}`
- **목적**: 리스크 관리 모니터링에서 신호의 질을 평가.

### 1.4 디버깅 정보
개발 및 테스트 단계에서 전략 로직의 중간 계산 값들을 추적하기 위해 사용합니다.
- **예시**: `{"internal_buffer_size": 150, "calc_time_ms": 5}`

## 2. 설계 원칙 (Best Practices)

1.  **선택적 사용**: 시스템의 핵심 로직(주문 실행 등)은 `metadata`에 의존해서는 안 됩니다. 핵심 데이터는 반드시 `Signal`의 표준 필드를 사용하세요.
2.  **데이터 타입 제한**: 외부 저장소(DB) 저장이나 직렬화(JSON)를 고려하여, 가능하면 기본 데이터 타입(str, int, float, bool)만 사용하고 복잡한 객체 저장은 지양합니다.
3.  **키 명명 규칙**: 여러 전략이 섞일 경우를 대비해, 가급적 명확한 키 이름을 사용하세요 (예: `rsi` 보다는 `strategy_a_rsi`).

## 3. 요약
`metadata`는 **"표준화와 유연성 사이의 균형"**을 맞추기 위한 장치입니다. 엔진은 표준 필드만 보고 기계적으로 주문을 처리하고, 인간(개발자/트레이더)은 `metadata`를 보고 전략의 깊은 의도를 파악합니다.
